<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>Diana & Yahya â€“ Super Wheel AI Nursing Game</title>

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f0f4ff, #e6ecf7);
            font-family: "Segoe UI", Tahoma, Arial;
            text-align: center;
            direction: rtl;
        }

        .header {
            margin-top: 25px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 14px;
        }

        .logo {
            width: 60px;
            height: 70px;
            position: relative;
            background: #2563eb;
            clip-path: polygon(50% 0%, 90% 20%, 90% 65%, 50% 100%, 10% 65%, 10% 20%);
            box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        }
        .cross-vertical {
            position: absolute;
            top: 22px; left: 27px;
            width: 6px; height: 25px;
            background: #ffffff;
            border-radius: 2px;
        }
        .cross-horizontal {
            position: absolute;
            top: 34px; left: 18px;
            width: 25px; height: 6px;
            background: #ffffff;
            border-radius: 2px;
        }
        .ecg-line {
            position: absolute;
            width: 40px;
            height: 18px;
            left: 10px;
            top: 45px;
            background: transparent;
            border-bottom: 3px solid #fff;
            clip-path: polygon(0% 70%, 25% 70%, 32% 10%, 40% 90%, 55% 30%, 65% 80%, 70% 55%, 100% 55%, 100% 75%, 0% 75%);
        }

        h1 {
            font-size: 30px;
            margin: 0;
            font-weight: 800;
            color: #111827;
        }
        .subtitle {
            margin-bottom: 20px;
            color: #444;
            font-size: 15px;
            font-weight: 500;
        }

        .game-container {
            max-width: 700px;
            margin: 0 auto 40px auto;
            padding: 20px;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        .wheel-wrapper {
            position: relative;
            width: 400px;
            height: 430px;
            margin: 0 auto;
        }

        .pointer {
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-top: 30px solid #111;
            z-index: 999;
        }

        #wheel {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 6px 18px rgba(0,0,0,0.15);
        }

        #spinBtn {
            margin-top: 25px;
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 999px;
            border: none;
            background: #2563eb;
            color: white;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 6px 14px rgba(37,99,235,0.4);
        }
        #spinBtn:hover { background: #1d4ed8; }
        #spinBtn:disabled { opacity: 0.6; cursor: not-allowed; }

        #timer {
            margin-top: 15px;
            font-size: 24px;
            font-weight: 700;
            color: #b91c1c;
        }

        #resultBox {
            margin: 25px auto 10px auto;
            padding: 18px;
            background: #fafafa;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            max-width: 550px;
            text-align: right;
            line-height: 1.8;
        }

        .question-text {
            font-weight: 800;
            color: #111;
        }
        .answer-text {
            font-weight: 800;
            color: #047857;
        }
        .hint {
            font-size: 13px;
            color: #6b7280;
        }

        .hidden { display: none; }

        /* Ø¯ÙˆØ±Ø§Ù† Ù„Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© ÙÙ‚Ø· (Ù…Ø´ Ù„Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) */
        .spinning {
            animation: spin 4s ease-out;
        }
        @keyframes spin {
            from { transform: translateX(-50%) rotate(0deg); }
            to   { transform: translateX(-50%) rotate(2880deg); } /* 8 Ù„ÙØ§Øª */
        }

        .options-container {
            margin-top: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option-btn {
            width: 100%;
            text-align: right;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            background: #ffffff;
            cursor: pointer;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
        }
        .option-btn:hover {
            background: #f3f4f6;
            transform: translateY(-1px);
        }
        .option-btn.disabled {
            cursor: default;
            opacity: 0.9;
        }
        .option-btn.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #14532d;
            font-weight: 700;
        }
        .option-btn.wrong {
            background: #fee2e2;
            border-color: #ef4444;
            color: #7f1d1d;
            font-weight: 700;
        }
        .option-status {
            margin-left: 8px;
            font-size: 16px;
        }

        .action-btn {
            margin-top: 12px;
            padding: 8px 18px;
            border-radius: 999px;
            border: none;
            background: #10b981;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        .action-btn:hover {
            background: #059669;
        }
    </style>
</head>

<body>

<div class="header">
    <div class="logo">
        <div class="cross-vertical"></div>
        <div class="cross-horizontal"></div>
        <div class="ecg-line"></div>
    </div>

    <div>
        <h1>Diana & Yahya</h1>
        <div class="subtitle">AI in Nursing â€“ Questions, Info, Challenges, Riddles & Real or Fake ğŸ¡</div>
    </div>
</div>

<div class="game-container">
    <div class="wheel-wrapper">
        <div class="pointer"></div>
        <canvas id="wheel" width="400" height="400"></canvas>
    </div>

    <button id="spinBtn">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©</button>

    <div id="timer" class="hidden"></div>

    <div id="resultBox" class="hidden"></div>
</div>

<!-- ğŸ”Š Ù…Ù„ÙØ§Øª Ø§Ù„ØµÙˆØª (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©) -->
<audio id="snd-spin"   src="spin.mp3"   preload="auto"></audio>
<audio id="snd-correct" src="correct.mp3" preload="auto"></audio>
<audio id="snd-wrong"   src="wrong.mp3"   preload="auto"></audio>
<audio id="snd-timeup"  src="timeup.mp3"  preload="auto"></audio>

<script>
/* ===================== DATA ===================== */

const mainOptions = [
    "Ø³Ø¤Ø§Ù„",
    "Ù…Ø¹Ù„ÙˆÙ…Ø©",
    "ØªØ­Ø¯ÙŠ",
    "Ù„ØºØ²",
    "Real or Fake",
    "Spin again"
];

const questions = [
    {
        q: "Ù…Ø§ Ø£Ù‡Ù… ÙØ§Ø¦Ø¯Ø© Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŸ",
        options: [
            "ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù…Ø±Ø¶ÙŠÙ†",
            "ØªØ­Ø³ÙŠÙ† Ø¯Ù‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ³Ø±Ø¹Ø© Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±",
            "Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡",
            "Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰"
        ],
        correctIndex: 1
    },
    {
        q: "ÙƒÙŠÙ ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ØŸ",
        options: [
            "Ø¹Ø¨Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø±",
            "Ø¹Ø¨Ø± Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¨Ø´Ø±ÙŠØ©",
            "Ø¹Ø¨Ø± ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ù„Ø£Ø¬Ù‡Ø²Ø©",
            "Ø¹Ø¨Ø± Ø¥ÙŠÙ‚Ø§Ù Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©"
        ],
        correctIndex: 0
    },
    {
        q: "Ù…Ø§ Ø¯ÙˆØ± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ©ØŸ",
        options: [
            "Ø¥Ù„ØºØ§Ø¡ Ø¯ÙˆØ± Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©",
            "Ø¥Ù†Ø´Ø§Ø¡ ÙˆØµÙØ§Øª Ø¯ÙˆØ§Ø¦ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©",
            "ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ù…Ø±Ø¶ Ù„Ù„Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ÙˆØ§Ù„ØªØ¯Ø§Ø®Ù„Ø§Øª",
            "Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø¨Ø¯Ù„ Ø§Ù„Ù…Ù…Ø±Ø¶"
        ],
        correctIndex: 2
    },
    {
        q: "ÙƒÙŠÙ ÙŠØ³Ø§Ø¹Ø¯ AI ÙÙŠ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ (ER)ØŸ",
        options: [
            "ØªØ£Ø®ÙŠØ± ÙØ±Ø² Ø§Ù„Ù…Ø±Ø¶Ù‰",
            "ÙØ±Ø² Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·ÙˆØ±Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø©",
            "Ù…Ù†Ø¹ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø±Ø¶Ù‰",
            "Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¥Ø³Ø¹Ø§Ù"
        ],
        correctIndex: 1
    },
    {
        q: "ÙÙŠ Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ²Ø©ØŒ Ù…Ø§Ø°Ø§ ÙŠÙ‚Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ",
        options: [
            "ØªØ´Ø®ÙŠØµ Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨",
            "ØªÙˆÙ‚Ø¹ ØªØ¯Ù‡ÙˆØ± Ø§Ù„Ù…Ø±ÙŠØ¶ Ù‚Ø¨Ù„ Ø­Ø¯ÙˆØ«Ù‡",
            "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§",
            "ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯"
        ],
        correctIndex: 1
    },
    {
        q: "ÙƒÙŠÙ Ø³Ø§Ù‡Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ ØªØ·ÙˆÙŠØ± Ù…Ù‡Ù†Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŸ",
        options: [
            "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù…Ø±Ø¶",
            "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ¯Ø±ÙŠØ¨",
            "ØªÙˆÙÙŠØ± ÙˆÙ‚Øª Ø£ÙƒØ¨Ø± Ù„Ù„Ø¹Ù†Ø§ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø§Ù„Ù…Ø±Ø¶Ù‰",
            "Ø¥Ù„ØºØ§Ø¡ Ø¯ÙˆØ± Ø§Ù„ØªÙˆØ§ØµÙ„"
        ],
        correctIndex: 2
    },
    {
        q: "Ù…Ø§ Ø¯ÙˆØ± Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ø§Ù„Ø°ÙƒÙŠØ© ÙÙŠ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŸ",
        options: [
            "ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ø¨ÙŠØ¨",
            "Ù†Ù‚Ù„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ ÙˆØªØ¹Ù‚ÙŠÙ… Ø§Ù„ØºØ±Ù",
            "ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£Ø¨Ø­Ø§Ø«",
            "Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"
        ],
        correctIndex: 1
    },
    {
        q: "ÙƒÙŠÙ ÙŠÙØ³ØªØ®Ø¯Ù… AI ÙÙŠ ØªØ¹Ù„ÙŠÙ… ÙˆØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ù…Ø±Ø¶ÙŠÙ†ØŸ",
        options: [
            "Ø¨Ø¥Ø¹Ø·Ø§Ø¦Ù‡Ù… Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ØµØ¹Ø¨Ø© ÙÙ‚Ø·",
            "Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© ÙˆÙ…Ø±Ø¶Ù‰ Ø§ÙØªØ±Ø§Ø¶ÙŠÙŠÙ†",
            "Ù…Ù†Ø¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¹Ù…Ù„ÙŠ",
            "Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª"
        ],
        correctIndex: 1
    },
    {
        q: "ÙƒÙŠÙ ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙÙŠ Ø§Ù„Ø¨ÙŠØªØŸ",
        options: [
            "Ù…Ø±Ø§Ù‚Ø¨Ø© Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ù…Ø±Ø¶ Ø¹Ù†Ø¯ Ø£ÙŠ Ø®Ø·Ø±",
            "Ù…Ù†Ø¹ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ù…Ù† Ø§Ù„ØªÙˆØ§ØµÙ„",
            "ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©",
            "ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ†"
        ],
        correctIndex: 0
    },
    {
        q: "Ù…Ø§ Ø£Ù‡Ù… ØªØ­Ø¯Ù‘Ù ÙŠÙˆØ§Ø¬Ù‡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŸ",
        options: [
            "Ø³Ù‡Ù„ ÙˆÙ…Ø¬Ø§Ù†ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§",
            "Ù„Ø§ ÙŠØ­ØªØ§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª",
            "Ø­Ù…Ø§ÙŠØ© Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ù‰",
            "ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØ¯Ø±ÙŠØ¨"
        ],
        correctIndex: 2
    }
];

const infoItems = [
    "1ï¸âƒ£ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: Ø£ÙˆÙ„ Ù†Ø¸Ø§Ù… Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ¶ ÙƒØ§Ù† Ø¹Ø§Ù… 1960 Ø¨Ø£Ù…Ø±ÙŠÙƒØ§ ÙÙŠ Ù…Ø³ØªØ´ÙÙ‰ LDS Ø¨ÙŠÙˆØªØ§ â€“ Ù†Ø¸Ø§Ù… â€œHELPâ€ Ù„Ø¯Ø¹Ù… Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª.",
    "2ï¸âƒ£ Ø£ÙˆÙ„ Ø¬Ù‡Ø§Ø²: Ø£ÙˆÙ„ Ø¬Ù‡Ø§Ø² Ù…Ø±Ø§Ù‚Ø¨Ø© Ø°ÙƒÙŠ Ù„Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø¸Ù‡Ø± Ø¨Ø§Ù„Ø³ØªÙŠÙ†ÙŠØ§Øª â€“ Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù†Ø¨Ø¶ ÙˆØ§Ù„ØªÙ†ÙØ³ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.",
    "3ï¸âƒ£ Ù…Ù†Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: Ø£Ù†Ø¸Ù…Ø© AI ØªØªØ­Ù‚Ù‚ Ù…Ù† 5 Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø¯ÙˆØ§Ø¡: Ø§Ù„Ø¯ÙˆØ§Ø¡ØŒ Ø§Ù„Ø¬Ø±Ø¹Ø©ØŒ Ø§Ù„Ù…Ø±ÙŠØ¶ØŒ Ø§Ù„ÙˆÙ‚ØªØŒ ÙˆØ§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©.",
    "4ï¸âƒ£ Ø§Ù„ØªÙ†Ø¨Ø¤ Ø§Ù„Ù…Ø¨ÙƒØ±: AI ÙŠØªÙ†Ø¨Ø£ Ø¨ØªØ¯Ù‡ÙˆØ± Ø§Ù„Ù…Ø±ÙŠØ¶ Ù‚Ø¨Ù„ 6â€“12 Ø³Ø§Ø¹Ø© Ù…Ù† Ø­Ø¯ÙˆØ«Ù‡ â€“ ÙŠÙ†Ù‚Ø° Ø§Ù„Ø£Ø±ÙˆØ§Ø­.",
    "5ï¸âƒ£ Ø§Ù„Ø£Ø³Ø±Ù‘Ø© Ø§Ù„Ø°ÙƒÙŠØ©: ØªØºÙŠØ± ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø±ÙŠØ¶ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØªÙ…Ù†Ø¹ Ø§Ù„Ø³Ù‚ÙˆØ· â€“ ØªÙ‚Ù„Ù„ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« 30â€“40%.",
    "6ï¸âƒ£ Ù…Ø¶Ø®Ø§Øª IV Ø§Ù„Ø°ÙƒÙŠØ©: ØªÙ…Ù†Ø¹ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø© ÙˆØªÙÙ†Ø¨Ù‡ Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ â€“ Ù‚Ù„Ù„Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ 50%.",
    "7ï¸âƒ£ Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª: ØªÙ†Ù‚Ù„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„Ø¹ÙŠÙ†Ø§Øª ÙˆØªØ±ÙØ¹ Ø§Ù„Ù…Ø±Ø¶Ù‰ â€“ ØªØ­Ù…ÙŠ 52% Ù…Ù† Ø§Ù„Ù…Ù…Ø±Ø¶Ø§Øª Ù…Ù† Ø¥ØµØ§Ø¨Ø§Øª Ø§Ù„Ø¸Ù‡Ø±.",
    "8ï¸âƒ£ ØªÙˆÙÙŠØ± Ø§Ù„ÙˆÙ‚Øª: Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø°ÙƒÙŠØ© ØªÙˆÙØ± 30â€“40% Ù…Ù† ÙˆÙ‚Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ù„Ù„Ù…Ù…Ø±Ø¶Ø©.",
    "9ï¸âƒ£ AI Ù…Ø³Ø§Ø¹Ø¯ ÙÙ‚Ø·: Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ØªØ³Ø§Ø¹Ø¯ Ù„ÙƒÙ† Ù„Ø§ ØªØ³ØªØ¨Ø¯Ù„ Ø§Ù„ØªØ¹Ø§Ø·Ù ÙˆØ§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ© ÙˆØ§Ù„Ø­ÙƒÙ… Ø§Ù„Ø³Ø±ÙŠØ±ÙŠ.",
    "ğŸ”Ÿ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„: Ù…Ù…Ø±Ø¶Ø© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø°ÙƒÙŠØ© = Ø£ÙØ¶Ù„ Ø±Ø¹Ø§ÙŠØ© ØµØ­ÙŠØ© Ù…Ù…ÙƒÙ†Ø©! ğŸ’™"
];

const riddles = [
    { riddle: "Ø¬Ù‡Ø§Ø² ØµØºÙŠØ± Ø¹Ù„Ù‰ Ù…Ø¹ØµÙ…ÙƒØŒ ÙŠØ±Ø§Ù‚Ø¨ Ù‚Ù„Ø¨Ùƒ ÙˆÙŠÙÙ†Ø¨Ù‡Ùƒ Ù„Ù„Ø®Ø·Ø± â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ©" },
    { riddle: "Ù…Ù„Ù Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠÙ‡ ÙƒÙ„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±ÙŠØ¶ØŒ ÙŠÙˆÙØ± Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ÙˆØ±Ù‚ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" },
    { riddle: "Ø±ÙˆØ¨ÙˆØª ÙŠØªØ¬ÙˆÙ„ Ø¨Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ØŒ ÙŠÙ†Ù‚Ù„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„Ø¹ÙŠÙ†Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¨ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ø±ÙˆØ¨ÙˆØª Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø·Ø¨ÙŠ" },
    { riddle: "Ø¹ÙŠÙ† Ø³Ø§Ù‡Ø±Ø© Ø¨ØºØ±ÙØ© Ø§Ù„Ù…Ø±ÙŠØ¶ØŒ ØªÙÙ†Ø¨Ù‡ Ø§Ù„Ù…Ù…Ø±Ø¶Ø© ÙÙˆØ±Ø§Ù‹ Ø¥Ø°Ø§ Ø³Ù‚Ø· Ø§Ù„Ù…Ø±ÙŠØ¶ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ©" },
    { riddle: "Ø£Ù‚Ø±Ø£ Ø¢Ù„Ø§Ù Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø¨Ø«ÙˆØ§Ù†ÙŠ ÙˆØ£Ø³Ø§Ø¹Ø¯ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø±ØŒ Ù„ÙƒÙ† Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ù…Ø³Ùƒ ÙŠØ¯ Ø§Ù„Ù…Ø±ÙŠØ¶ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ" },
    { riddle: "Ø³Ø±ÙŠØ± Ø°ÙƒÙŠ ÙŠÙØºÙŠØ± ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø±ÙŠØ¶ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù…Ù†Ø¹ Ø´ÙŠØ¡ Ø®Ø·ÙŠØ± â€“ Ù…Ø§Ø°Ø§ ÙŠÙ…Ù†Ø¹ØŸ", answer: "ØªÙ‚Ø±Ø­Ø§Øª Ø§Ù„ÙØ±Ø§Ø´" },
    { riddle: "Ù†Ø¸Ø§Ù… ÙŠÙ…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ³ÙˆØ§Ø± Ø§Ù„Ù…Ø±ÙŠØ¶ØŒ ÙŠØªØ£ÙƒØ¯ Ù…Ù† 5 Ø£Ø´ÙŠØ§Ø¡ ØµØ­ÙŠØ­Ø© Ù‚Ø¨Ù„ Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¡ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø£Ø¯ÙˆÙŠØ©" },
    { riddle: "Ø¬Ù‡Ø§Ø² Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø³Ø±ÙŠØ± ÙŠÙ‚ÙŠØ³ Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ù†Ø¨Ø¶ ÙˆØ§Ù„Ø­Ø±Ø§Ø±Ø© ÙˆØ§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŒ ÙˆÙŠØ±Ø³Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ù…Ø±Ø¶Ø© â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ø¬Ù‡Ø§Ø² Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ© (Vital Signs Monitor)" },
    { riddle: "Ù…Ø¶Ø®Ø© Ø°ÙƒÙŠØ© ØªØ¹Ø·ÙŠ Ø§Ù„Ø¯ÙˆØ§Ø¡ Ø§Ù„ÙˆØ±ÙŠØ¯ÙŠ Ø¨Ø¬Ø±Ø¹Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© Ø¬Ø¯Ø§Ù‹ØŒ ØªÙÙ†Ø¨Ù‡ Ø¥Ø°Ø§ Ø§Ù†Ø³Ø¯ Ø§Ù„Ø®Ø· Ø£Ùˆ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¯ÙˆØ§Ø¡ØŒ ÙˆØªØ­Ù…ÙŠ Ø§Ù„Ù…Ø±ÙŠØ¶ Ù…Ù† Ø§Ù„Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø© â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "Ù…Ø¶Ø®Ø© Ø§Ù„ØªØ³Ø±ÙŠØ¨ Ø§Ù„Ø°ÙƒÙŠØ© (Smart IV Pump)" },
    { riddle: "ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø¬ÙˆØ§Ù„ Ø§Ù„Ù…Ù…Ø±Ø¶Ø© ÙŠØªØ±Ø¬Ù… ÙƒÙ„Ø§Ù… Ø§Ù„Ù…Ø±ÙŠØ¶ Ù„Ø£ÙŠ Ù„ØºØ© ÙÙˆØ±Ø§Ù‹ØŒ ÙŠÙƒØ³Ø± Ø­Ø§Ø¬Ø² Ø§Ù„Ù„ØºØ© ÙˆÙŠØ³Ø§Ø¹Ø¯ Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ â€“ Ù…Ù† Ø£Ù†Ø§ØŸ", answer: "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© Ø§Ù„Ø·Ø¨ÙŠØ©" }
];

const challenges = [
    "Ø³Ù…Ù‘ÙŠ 3 Ø£Ø¬Ù‡Ø²Ø© Ø°ÙƒÙŠØ© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø­ÙŠØ§ØªÙ†Ø§ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.",
    "Ø³Ù…Ù‘ÙŠ ÙˆÙŠÙ† Ù…Ù…ÙƒÙ† Ù†Ù„Ø§Ù‚ÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø­ÙŠØ§ØªÙ†Ø§ØŸ (3 Ø£Ù…Ø«Ù„Ø©).",
    "Ø³Ù…Ù‘ÙŠ 3 Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØµØ­ÙŠØ© ØªÙ‚ÙŠØ³Ù‡Ø§ Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ©.",
    "Ø³Ù…Ù‘ÙŠ 3 ÙÙˆØ§Ø¦Ø¯ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø¨Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰.",
    "Ø³Ù…Ù‘ÙŠ 3 ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØµØ­ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„.",
    "Ø³Ù…Ù‘ÙŠ 3 Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ø±ÙˆØ¨ÙˆØª Ù…Ù…ÙƒÙ† ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠÙ‡Ø§.",
    "Ø³Ù…Ù‘ÙŠ 3 Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø·Ø¨ÙŠ.",
    "Ø³Ù…Ù‘ÙŠ 3 Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ù…Ø§ Ø¨ØªÙ‚Ø¯Ø± ØªØ³ØªØ¨Ø¯Ù„Ù‡Ø§.",
    "Ø³Ù…Ù‘ÙŠ 3 Ø£Ù…Ø§ÙƒÙ† Ø¨Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰.",
    "Ø³Ù…Ù‘ÙŠ 3 Ø£Ø¬Ù‡Ø²Ø© Ø·Ø¨ÙŠØ© Ø¨ØªØ¹Ø±ÙÙ‡Ø§."
];

const realFakeItems = [
    { statement: "ÙŠÙˆØ¬Ø¯ Ø³Ø±ÙŠØ± Ø°ÙƒÙŠ ÙŠØºÙŠØ± ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø±ÙŠØ¶ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù…Ù†Ø¹ ØªÙ‚Ø±Ø­Ø§Øª Ø§Ù„ÙØ±Ø§Ø´.", isReal: true },
    { statement: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ù…Ø±Ø¶Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ù‰.", isReal: false },
    { statement: "ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø°ÙƒÙŠØ© ÙÙŠ ØºØ±Ù Ø§Ù„Ù…Ø±Ø¶Ù‰ ØªÙƒØªØ´Ù Ø§Ù„Ø³Ù‚ÙˆØ· ÙˆØªØ±Ø³Ù„ Ø¥Ù†Ø°Ø§Ø± ÙÙˆØ±ÙŠ.", isReal: true },
    { statement: "AI ÙŠØ³ØªØ·ÙŠØ¹ Ù‚Ø±Ø§Ø¡Ø© Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ø±ÙŠØ¶ ÙˆÙ…Ø¹Ø±ÙØ© Ù…Ø§ ÙŠØ­ØªØ§Ø¬Ù‡.", isReal: false },
    { statement: "Ù†Ø¸Ø§Ù… AI ÙŠØªÙ†Ø¨Ø£ Ø¨ØªØ¯Ù‡ÙˆØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±ÙŠØ¶ Ù‚Ø¨Ù„ Ø³Ø§Ø¹Ø§Øª Ù…Ù† Ø­Ø¯ÙˆØ«Ù‡.", isReal: true },
    { statement: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„ØªØ¹Ø§Ø·Ù Ù…Ø«Ù„ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ØªÙ…Ø§Ù…Ø§Ù‹.", isReal: false },
    { statement: "Ø±ÙˆØ¨ÙˆØªØ§Øª ØªÙ†Ù‚Ù„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰.", isReal: true },
    { statement: "Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ© Ø¨ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ù…Ø±Ø¶Ø© Ù„Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©.", isReal: true },
    { statement: "Ø±ÙˆØ¨ÙˆØª ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø±Ø§Ø­ÙŠØ© Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ø¯ÙˆÙ† Ø·Ø¨ÙŠØ¨.", isReal: false },
    { statement: "Ø³Ø§Ø¹Ø§Øª Ø°ÙƒÙŠØ© ØªÙƒØªØ´Ù Ø¹Ø¯Ù… Ø§Ù†ØªØ¸Ø§Ù… Ø¶Ø±Ø¨Ø§Øª Ø§Ù„Ù‚Ù„Ø¨ ÙˆØªØ±Ø³Ù„ ØªÙ†Ø¨ÙŠÙ‡ ÙÙˆØ±ÙŠ.", isReal: true }
];

const sliceColors = [
    "#F97373", "#F9A826", "#34D399",
    "#3B82F6", "#8B5CF6", "#EC4899"
];

/* ===================== AUDIO ===================== */

const sndSpin    = document.getElementById("snd-spin");
const sndCorrect = document.getElementById("snd-correct");
const sndWrong   = document.getElementById("snd-wrong");
const sndTimeup  = document.getElementById("snd-timeup");

let audioCtx = null;

function getAudioCtx() {
    if (!audioCtx) {
        const AC = window.AudioContext || window.webkitAudioContext;
        audioCtx = new AC();
    }
    if (audioCtx.state === "suspended") audioCtx.resume();
    return audioCtx;
}

function fallbackBeep(freq = 440, duration = 200) {
    try {
        const ctx = getAudioCtx();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = "triangle";
        osc.frequency.value = freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.2, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duration / 1000);
        osc.start();
        osc.stop(ctx.currentTime + duration / 1000);
    } catch (_) {}
}

function playAudioSafe(audioEl, fallbackFreq) {
    if (!audioEl || !audioEl.src) {
        fallbackBeep(fallbackFreq);
        return;
    }
    try {
        audioEl.currentTime = 0;
        const p = audioEl.play();
        if (p && p.catch) p.catch(() => fallbackBeep(fallbackFreq));
    } catch (_) {
        fallbackBeep(fallbackFreq);
    }
}

function playSpinSound()    { playAudioSafe(sndSpin,   500); }
function playCorrectSound() { playAudioSafe(sndCorrect,900); }
function playWrongSound()   { playAudioSafe(sndWrong,  220); }
function playTimeUpSound()  { playAudioSafe(sndTimeup, 400); }

/* ===================== CANVAS & GLOBALS ===================== */

const canvas   = document.getElementById("wheel");
const ctx      = canvas.getContext("2d");
const spinBtn  = document.getElementById("spinBtn");
const resultBox= document.getElementById("resultBox");
const timerBox = document.getElementById("timer");

let countdownInterval = null;

/* Ø²Ø§ÙˆÙŠØ© Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø±Ø§Ø¯ÙŠØ§Ù†) */
let mainRotation = 0;

/* ===================== DRAW FUNCTIONS ===================== */

/* Ø±Ø³Ù… Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¹ Ø¯ÙˆØ±Ø§Ù† mainRotation ÙˆØ¶Ø¨Ø· Ø§Ù„Ù†ØµÙˆØµ */
function drawMainWheel() {
    const options = mainOptions;
    const count = options.length;
    const arc = (Math.PI * 2) / count;

    ctx.clearRect(0,0,400,400);
    ctx.save();
    ctx.translate(200,200);
    ctx.rotate(mainRotation);

    for (let i=0;i<count;i++) {
        const start = -Math.PI/2 + i*arc; // ØªØ¨Ø¯Ø£ Ù…Ù† Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¬Ù„Ø©

        ctx.beginPath();
        ctx.moveTo(0,0);
        ctx.arc(0,0,200,start,start+arc);
        ctx.closePath();
        ctx.fillStyle = sliceColors[i % sliceColors.length];
        ctx.fill();

        ctx.save();
        ctx.rotate(start + arc/2);
        ctx.fillStyle = "#111";
        ctx.font = "bold 16px Tahoma";
        ctx.textAlign = "center";
        let text = options[i];
        if (text.length > 16) text = text.slice(0,14)+"â€¦";
        ctx.fillText(text,130,8);
        ctx.restore();
    }

    ctx.restore();
}

/* Ø±Ø³Ù… Ø¹Ø¬Ù„Ø© Ù„Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø¯ÙˆØ±Ø§Ù† Ù…ØªØ­Ø±Ùƒ */
function drawCategoryWheel(options) {
    const count = options.length;
    const arc = (Math.PI * 2) / count;

    ctx.clearRect(0,0,400,400);
    ctx.save();
    ctx.translate(200,200);

    for (let i=0;i<count;i++) {
        const start = -Math.PI/2 + i*arc;

        ctx.beginPath();
        ctx.moveTo(0,0);
        ctx.arc(0,0,200,start,start+arc);
        ctx.closePath();
        ctx.fillStyle = sliceColors[i % sliceColors.length];
        ctx.fill();

        ctx.save();
        ctx.rotate(start + arc/2);
        ctx.fillStyle = "#111";
        ctx.font = "bold 16px Tahoma";
        ctx.textAlign = "center";
        let text = options[i];
        if (text.length > 16) text = text.slice(0,14)+"â€¦";
        ctx.fillText(text,130,8);
        ctx.restore();
    }

    ctx.restore();
}

/* Ø£ÙˆÙ„ Ø±Ø³Ù… Ù„Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
drawMainWheel();

/* ===================== HELPERS ===================== */

function pickRandomIndex(arr) {
    return Math.floor(Math.random() * arr.length);
}

function clearCountdown() {
    if (countdownInterval) {
        clearInterval(countdownInterval);
        countdownInterval = null;
    }
    timerBox.classList.add("hidden");
}

function startCountdown(seconds,onTick,onEnd) {
    clearCountdown();
    let remaining = seconds;
    timerBox.classList.remove("hidden");
    onTick(remaining);

    countdownInterval = setInterval(()=>{
        remaining--;
        if (remaining>=0) onTick(remaining);
        if (remaining<=0) {
            clearCountdown();
            if (onEnd) onEnd();
        }
    },1000);
}

/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø­ÙŠØ« Ø§Ù„Ø³Ù‡Ù… ÙŠÙˆÙ‚Ù Ø¹Ù„Ù‰ Ø®Ø§Ù†Ø© Ù…Ø¹ÙŠÙ‘Ù†Ø© */
function animateMainRotation(from,to,duration,done) {
    playSpinSound();
    spinBtn.disabled = true;
    let startTime = null;

    function step(ts) {
        if (!startTime) startTime = ts;
        let progress = (ts - startTime) / duration;
        if (progress > 1) progress = 1;
        const eased = 1 - Math.pow(1-progress,3); // easeOut
        mainRotation = from + (to-from)*eased;
        drawMainWheel();
        if (progress < 1) {
            requestAnimationFrame(step);
        } else {
            spinBtn.disabled = false;
            playTimeUpSound();
            done();
        }
    }
    requestAnimationFrame(step);
}

/* Ø¯ÙˆØ±Ø§Ù† Ø¨Ø³ÙŠØ· Ù„Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© (Ù…Ø´ Ù…Ù‡Ù… ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ø³Ù‡Ù…) */
function spinWheelCategory(callback) {
    clearCountdown();
    spinBtn.disabled = true;
    playSpinSound();
    canvas.classList.add("spinning");

    setTimeout(()=>{
        canvas.classList.remove("spinning");
        spinBtn.disabled = false;
        playTimeUpSound();
        callback();
    },4000);
}

function resetToMain() {
    setTimeout(()=>{
        mainRotation = 0;
        canvas.style.transform = "translateX(-50%)";
        canvas.style.transition = "none";
        drawMainWheel();
        spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©";
        spinBtn.onclick = spinMain;
        resultBox.innerHTML += `<p class="hint">ğŸ” Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©" Ù„Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.</p>`;
    },600);
}

/* ===================== MAIN WHEEL LOGIC ===================== */

spinBtn.onclick = spinMain;

function spinMain() {
    clearCountdown();

    const count = mainOptions.length;
    const arc = (Math.PI*2) / count;

    const index = pickRandomIndex(mainOptions);

    // Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù‡Ø¯Ù Ø¨Ø­ÙŠØ« Ù…Ø±ÙƒØ² Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ÙŠÙˆØµÙ„ Ù„Ù„Ø£Ø¹Ù„Ù‰ (ØªØ­Øª Ø§Ù„Ø³Ù‡Ù…)
    const targetBase = - (index*arc + arc/2);    // ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ØªØ­Øª Ø§Ù„Ø³Ù‡Ù…
    const fullTurns = 4;                         // Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙØ§Øª Ù‚Ø¨Ù„ Ø§Ù„ÙˆØµÙˆÙ„
    const target = targetBase + fullTurns*2*Math.PI;

    animateMainRotation(mainRotation, target, 4000, ()=>{
        const result = mainOptions[index];

        if (result === "Ø³Ø¤Ø§Ù„") {
            enterQuestionCategory();
        } else if (result === "Ù…Ø¹Ù„ÙˆÙ…Ø©") {
            enterInfoCategory();
        } else if (result === "ØªØ­Ø¯ÙŠ") {
            enterChallengeCategory();
        } else if (result === "Ù„ØºØ²") {
            enterRiddleCategory();
        } else if (result === "Real or Fake") {
            enterRealFakeCategory();
        } else if (result === "Spin again") {
            resultBox.classList.remove("hidden");
            resultBox.innerHTML = `<h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: Spin again</h3><p class="hint">ğŸ” Ø§Ù„Ø¹Ø¬Ù„Ø© Ø±Ø­ ØªØ±Ø¬Ø¹ ØªÙ„Ù Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©.</p>`;
            setTimeout(spinMain,800);
        }
    });
}

/* ===================== Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ===================== */

function enterQuestionCategory() {
    canvas.style.transition = "";
    canvas.style.transform  = "translateX(-50%)";
    drawCategoryWheel(questions.map((_,i)=>`Ø³Ø¤Ø§Ù„ ${i+1}`));
    resultBox.classList.remove("hidden");
    resultBox.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙØ¦Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
        <p>Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø£Ø³Ø¦Ù„Ø©)" Ù„Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„.</p>
    `;
    clearCountdown();
    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø£Ø³Ø¦Ù„Ø©)";
    spinBtn.onclick = spinQuestionWheel;
}

function spinQuestionWheel() {
    spinWheelCategory(()=>{
        const qObj = questions[pickRandomIndex(questions)];
        showQuestion(qObj);
    });
}

function showQuestion(qObj) {
    let optionsHtml = '<div class="options-container">';
    qObj.options.forEach((opt,i)=>{
        optionsHtml += `
            <button class="option-btn" data-index="${i}">
                <span>${opt}</span>
                <span class="option-status"></span>
            </button>`;
    });
    optionsHtml += '</div>';

    resultBox.innerHTML = `
        <h3>â“ Ø§Ù„Ø³Ø¤Ø§Ù„</h3>
        <p class="question-text">${qObj.q}</p>
        ${optionsHtml}
        <p class="hint">Ù„Ø¯ÙŠÙƒ 20 Ø«Ø§Ù†ÙŠØ© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©.</p>
    `;

    let answered = false;

    startCountdown(
        20,
        sec => { timerBox.textContent = `â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${sec} Ø«Ø§Ù†ÙŠØ©`; },
        ()=>{
            if (answered) return;
            answered = true;
            playTimeUpSound();
            revealCorrectAnswer(qObj,null,true);
            resetToMain();
        }
    );

    attachMCQHandlers(qObj, ()=>{
        answered = true;
        clearCountdown();
        resetToMain();
    });
}

function attachMCQHandlers(qObj,onFinish) {
    const buttons = Array.from(document.querySelectorAll(".option-btn"));
    buttons.forEach(btn=>{
        btn.addEventListener("click",()=>{
            if (btn.classList.contains("disabled")) return;
            const chosenIndex = parseInt(btn.getAttribute("data-index"),10);
            buttons.forEach(b=>b.classList.add("disabled"));
            const isCorrect = (chosenIndex === qObj.correctIndex);
            if (isCorrect) playCorrectSound(); else playWrongSound();
            revealCorrectAnswer(qObj,chosenIndex,false);
            if (onFinish) onFinish();
        });
    });
}

function revealCorrectAnswer(qObj,chosenIndex,isTimeUp) {
    const buttons = Array.from(document.querySelectorAll(".option-btn"));

    buttons.forEach((b,i)=>{
        const statusSpan = b.querySelector(".option-status");
        if (i === qObj.correctIndex) {
            b.classList.add("correct");
            statusSpan.textContent = "âœ…";
        } else if (chosenIndex !== null && i === chosenIndex && i !== qObj.correctIndex) {
            b.classList.add("wrong");
            statusSpan.textContent = "âŒ";
        }
    });

    if (isTimeUp) {
        resultBox.innerHTML += `<p class="hint" style="color:#b91c1c;font-weight:bold;">â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! ØªÙ… ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±.</p>`;
    }
}

/* ===================== Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ===================== */

function enterInfoCategory() {
    canvas.style.transition = "";
    canvas.style.transform  = "translateX(-50%)";
    drawCategoryWheel(infoItems.map((_,i)=>`Ù…Ø¹Ù„ÙˆÙ…Ø© ${i+1}`));
    resultBox.classList.remove("hidden");
    resultBox.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙØ¦Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h3>
        <p>Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)" Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø©.</p>
    `;
    clearCountdown();
    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)";
    spinBtn.onclick = spinInfoWheel;
}

function spinInfoWheel() {
    spinWheelCategory(()=>{
        const info = infoItems[pickRandomIndex(infoItems)];
        clearCountdown();
        resultBox.innerHTML = `
            <h3>ğŸ’¡ Ù…Ø¹Ù„ÙˆÙ…Ø© ØªÙ…Ø±ÙŠØ¶ÙŠØ© â€“ AI</h3>
            <p class="question-text">${info}</p>
            <button class="action-btn" onclick="backToMainFromButton()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¹Ø¬Ù„Ø©</button>
        `;
    });
}

function backToMainFromButton() {
    resultBox.innerHTML += `<p class="hint">ØªÙ… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¹Ø¬Ù„Ø©.</p>`;
    resetToMain();
}

/* ===================== Ø§Ù„Ø£Ù„ØºØ§Ø² ===================== */

function enterRiddleCategory() {
    canvas.style.transition = "";
    canvas.style.transform  = "translateX(-50%)";
    drawCategoryWheel(riddles.map((_,i)=>`Ù„ØºØ² ${i+1}`));
    resultBox.classList.remove("hidden");
    resultBox.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙØ¦Ø© Ø§Ù„Ø£Ù„ØºØ§Ø²</h3>
        <p>Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø£Ù„ØºØ§Ø²)" Ù„Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØ².</p>
    `;
    clearCountdown();
    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø£Ù„ØºØ§Ø²)";
    spinBtn.onclick = spinRiddleWheel;
}

function spinRiddleWheel() {
    spinWheelCategory(()=>{
        const rObj = riddles[pickRandomIndex(riddles)];
        showRiddle(rObj);
    });
}

function showRiddle(rObj) {
    resultBox.innerHTML = `
        <h3>ğŸ§© Ø§Ù„Ù„ØºØ²</h3>
        <p class="question-text">${rObj.riddle}</p>
        <p class="hint">Ù„Ø¯ÙŠÙƒ 20 Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªÙÙƒÙŠØ± Ù‚Ø¨Ù„ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©.</p>
    `;

    startCountdown(
        20,
        sec => { timerBox.textContent = `â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${sec} Ø«Ø§Ù†ÙŠØ©`; },
        ()=>{
            playTimeUpSound();
            resultBox.innerHTML += `
                <p>âœ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:</p>
                <p class="answer-text">${rObj.answer}</p>
            `;
            resetToMain();
        }
    );
}

/* ===================== Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ===================== */

function enterChallengeCategory() {
    canvas.style.transition = "";
    canvas.style.transform  = "translateX(-50%)";
    drawCategoryWheel(challenges.map((_,i)=>`ØªØ­Ø¯ÙŠ ${i+1}`));
    resultBox.classList.remove("hidden");
    resultBox.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙØ¦Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª</h3>
        <p>Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (ØªØ­Ø¯ÙŠØ§Øª)" Ù„Ø§Ø®ØªÙŠØ§Ø± ØªØ­Ø¯Ù‘ÙŠ.</p>
    `;
    clearCountdown();
    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (ØªØ­Ø¯ÙŠØ§Øª)";
    spinBtn.onclick = spinChallengeWheel;
}

function spinChallengeWheel() {
    spinWheelCategory(()=>{
        const chText = challenges[pickRandomIndex(challenges)];
        showChallenge(chText);
    });
}

function showChallenge(chText) {
    resultBox.innerHTML = `
        <h3>ğŸ­ Ø§Ù„ØªØ­Ø¯ÙŠ</h3>
        <p class="question-text">${chText}</p>
        <p class="hint">Ù„Ø¯ÙŠÙƒ 25 Ø«Ø§Ù†ÙŠØ© Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ø¯ÙŠ.</p>
        <button class="action-btn" id="finishChallengeBtn">Ø£Ù†Ù‡ÙŠØª Ø§Ù„ØªØ­Ø¯ÙŠ â€“ Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¹Ø¬Ù„Ø©</button>
    `;

    startCountdown(
        25,
        sec => { timerBox.textContent = `â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${sec} Ø«Ø§Ù†ÙŠØ©`; },
        ()=>{
            playTimeUpSound();
            resultBox.innerHTML += `<p style="color:#b91c1c;font-weight:bold;">â° Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¯ÙŠ!</p>`;
            resetToMain();
        }
    );

    document.getElementById("finishChallengeBtn").onclick = ()=>{
        clearCountdown();
        resultBox.innerHTML += `<p class="hint">âœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª.</p>`;
        resetToMain();
    };
}

/* ===================== Real or Fake ===================== */

function enterRealFakeCategory() {
    canvas.style.transition = "";
    canvas.style.transform  = "translateX(-50%)";
    drawCategoryWheel(realFakeItems.map((_,i)=>`RF ${i+1}`));
    resultBox.classList.remove("hidden");
    resultBox.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: Real or Fake</h3>
        <p>Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Real or Fake)" Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¬Ù…Ù„Ø©.</p>
    `;
    clearCountdown();
    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Real or Fake)";
    spinBtn.onclick = spinRealFakeWheel;
}

function spinRealFakeWheel() {
    spinWheelCategory(()=>{
        const item = realFakeItems[pickRandomIndex(realFakeItems)];
        showRealFake(item);
    });
}

function showRealFake(item) {
    resultBox.innerHTML = `
        <h3>ğŸ” Real or Fake</h3>
        <p class="question-text">${item.statement}</p>
        <div style="margin-top:12px; display:flex; gap:10px; justify-content:flex-start;">
            <button id="realBtn" class="action-btn" style="background:#16a34a;">Real / Ø­Ù‚ÙŠÙ‚ÙŠ</button>
            <button id="fakeBtn" class="action-btn" style="background:#ef4444;">Fake / Ù…Ø²ÙŠÙ</button>
        </div>
        <p class="hint">Ù„Ø¯ÙŠÙƒ 20 Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±.</p>
    `;

    let answered = false;

    startCountdown(
        20,
        sec => { timerBox.textContent = `â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${sec} Ø«Ø§Ù†ÙŠØ©`; },
        ()=>{
            if (answered) return;
            answered = true;
            playTimeUpSound();
            resultBox.innerHTML += `<p style="color:#b91c1c;font-weight:bold;">â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø§Ù„Ø¬Ù…Ù„Ø© ÙƒØ§Ù†Øª: <span class="answer-text">${item.isReal ? "Ø­Ù‚ÙŠÙ‚ÙŠØ©" : "Ù…Ø²ÙŠÙØ©"}</span></p>`;
            resetToMain();
        }
    );

    const realBtn = document.getElementById("realBtn");
    const fakeBtn = document.getElementById("fakeBtn");

    function disableButtons() {
        realBtn.disabled = true;
        fakeBtn.disabled = true;
        realBtn.style.opacity = 0.8;
        fakeBtn.style.opacity = 0.8;
    }

    realBtn.onclick = ()=>{
        if (answered) return;
        answered = true;
        clearCountdown();

        if (item.isReal) {
            playCorrectSound();
            resultBox.innerHTML += `<p class="answer-text">âœ”ï¸ ØµØ­ÙŠØ­! Ø§Ù„Ø¬Ù…Ù„Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>`;
        } else {
            playWrongSound();
            resultBox.innerHTML += `<p style="color:#b91c1c;font-weight:bold;">âŒ Ø®Ø·Ø£ØŒ Ø§Ù„Ø¬Ù…Ù„Ø© Ù…Ø²ÙŠÙØ©.</p>`;
        }
        disableButtons();
        resetToMain();
    };

    fakeBtn.onclick = ()=>{
        if (answered) return;
        answered = true;
        clearCountdown();

        if (!item.isReal) {
            playCorrectSound();
            resultBox.innerHTML += `<p class="answer-text">âœ”ï¸ ØµØ­ÙŠØ­! Ø§Ù„Ø¬Ù…Ù„Ø© Ù…Ø²ÙŠÙØ©.</p>`;
        } else {
            playWrongSound();
            resultBox.innerHTML += `<p style="color:#b91c1c;font-weight:bold;">âŒ Ø®Ø·Ø£ØŒ Ø§Ù„Ø¬Ù…Ù„Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>`;
        }
        disableButtons();
        resetToMain();
    };
}
</script>

</body>
</html>
