<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>Diana and Yahya â€“ Nursing Wheel</title>

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f0f4ff, #e6ecf7);
            font-family: "Segoe UI", Tahoma, Arial;
            text-align: center;
        }

        /* ================= HEADER TITLE + LOGO ================= */
        .header {
            margin-top: 25px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 14px;
        }

        /* ---- LOGO: Shield + Medical Cross + ECG ---- */
        .logo {
            width: 60px;
            height: 70px;
            position: relative;
            background: #2563eb;
            clip-path: polygon(50% 0%, 90% 20%, 90% 65%, 50% 100%, 10% 65%, 10% 20%);
            box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        }

        /* Medical cross */
        .cross-vertical {
            position: absolute;
            top: 22px; left: 27px;
            width: 6px; height: 25px;
            background: #ffffff;
            border-radius: 2px;
        }
        .cross-horizontal {
            position: absolute;
            top: 34px; left: 18px;
            width: 25px; height: 6px;
            background: #ffffff;
            border-radius: 2px;
        }

        /* ECG Line */
        .ecg-line {
            position: absolute;
            width: 40px;
            height: 18px;
            left: 10px;
            top: 45px;
            background: transparent;
            border-bottom: 3px solid #fff;
            clip-path: polygon(0% 70%, 25% 70%, 32% 10%, 40% 90%, 55% 30%, 65% 80%, 70% 55%, 100% 55%, 100% 75%, 0% 75%);
        }

        h1 {
            font-size: 30px;
            margin: 0;
            font-weight: 800;
            color: #111827;
        }
        .subtitle {
            margin-bottom: 20px;
            color: #444;
            font-size: 15px;
            font-weight: 500;
        }

        /* ================= WHEEL CONTAINER ================= */
        .game-container {
            max-width: 600px;
            margin: 0 auto 40px auto;
            padding: 20px;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        .wheel-wrapper {
            position: relative;
            width: 400px;
            height: 430px;
            margin: 0 auto;
        }

        /* Pointer Arrow */
        .pointer {
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-top: 30px solid #111; /* â†“ arrow */
            z-index: 999;
        }

        #wheel {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 6px 18px rgba(0,0,0,0.15);
        }

        #spinBtn {
            margin-top: 25px;
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 999px;
            border: none;
            background: #2563eb;
            color: white;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 6px 14px rgba(37,99,235,0.4);
        }
        #spinBtn:hover { background: #1d4ed8; }
        #spinBtn:disabled { opacity: 0.6; cursor: not-allowed; }

        #timer {
            margin-top: 15px;
            font-size: 24px;
            font-weight: 700;
            color: #b91c1c;
        }

        #resultBox {
            margin: 25px auto 10px auto;
            padding: 18px;
            background: #fafafa;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            max-width: 500px;
            text-align: right;
            line-height: 1.8;
        }

        .question-text {
            font-weight: 800;
            color: #111;
        }
        .answer-text {
            font-weight: 800;
            color: #047857;
        }

        .hidden { display: none; }

        .spinning {
            animation: spin 3s ease-out;
        }

        @keyframes spin {
            from { transform: translateX(-50%) rotate(0deg); }
            to   { transform: translateX(-50%) rotate(1440deg); }
        }
    </style>
</head>

<body>

<!-- ===================== HEADER ======================= -->
<div class="header">
    <div class="logo">
        <div class="cross-vertical"></div>
        <div class="cross-horizontal"></div>
        <div class="ecg-line"></div>
    </div>

    <div>
        <h1>Diana and Yahya</h1>
        <div class="subtitle">Nursing Questions & Challenges Wheel ğŸ¡</div>
    </div>
</div>

<!-- ===================== GAME CONTAINER ======================= -->
<div class="game-container">
    <div class="wheel-wrapper">
        <div class="pointer"></div>
        <canvas id="wheel" width="400" height="400"></canvas>
    </div>

    <button id="spinBtn">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©</button>

    <div id="timer" class="hidden"></div>

    <div id="resultBox" class="hidden"></div>
</div>


<script>
/* ============================================================
   ===================== GAME DATA =============================
   ============================================================ */

const mainOptions = ["ØªØ­Ø¯ÙŠ", "Ø³Ø¤Ø§Ù„"];

const questions = [
    { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù‚Ù„Ø¨ØŸ", a: "60â€“100 Ù†Ø¨Ø¶Ø©/Ø¯Ù‚ÙŠÙ‚Ø©" },
    { q: "Ù…Ø§ Ù‡Ùˆ ØªØ±ÙŠØ§Ù‚ Ø§Ù„Ù…ÙˆØ±ÙÙŠÙ†ØŸ", a: "Naloxone" },
    { q: "Ù…ØªÙ‰ ÙŠØ¹ØªØ¨Ø± Ø§Ù„Ø³ÙƒØ± Ù…Ù†Ø®ÙØ¶ØŸ", a: "< 70 mg/dL" },
    { q: "Ø£ÙŠÙ† ÙŠÙÙØ­Øµ Ø§Ù„Ù†Ø¨Ø¶ ÙÙŠ CPRØŸ", a: "Ø§Ù„Ø´Ø±ÙŠØ§Ù† Ø§Ù„Ø³Ø¨Ø§ØªÙŠ" },
    { q: "Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¹Ù„Ø§Ø¬ÙŠ Ù„Ù„Ø¯ÙŠØ¬ÙˆÙƒØ³ÙŠÙ†ØŸ", a: "0.5 â€“ 2 ng/mL" }
];

const challenges = [
    "Ø§Ø°ÙƒØ±ÙŠ 3 Ø¹Ù„Ø§Ù…Ø§Øª Ù„Ù„Ø¬ÙØ§Ù Ø§Ù„Ø´Ø¯ÙŠØ¯.",
    "Ø§Ø´Ø±Ø­ÙŠ ÙˆØ¶Ø¹ÙŠØ© Fowler Ù„Ù…Ø±ÙŠØ¶ Dyspnea.",
    "Ø¹Ø¯Ø¯ÙŠ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø§Ù„Ø£Ø±Ø¨Ø¹.",
    "Ø­Ø¯Ø¯ÙŠ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† IM Ùˆ IV Ø¨Ø³Ø±Ø¹Ø©.",
    "Ø§Ø°ÙƒØ±ÙŠ Ù…Ø«Ø§Ù„ÙŠÙ† Ø¹Ù„Ù‰ Ù…Ø³ÙƒÙ†Ø§Øª ØºÙŠØ± Ø£ÙÙŠÙˆÙ†ÙŠØ©."
];

const sliceColors = [
    "#F97373", "#F9A826", "#34D399",
    "#3B82F6", "#8B5CF6", "#EC4899",
    "#10B981", "#FACC15"
];

let currentSet = mainOptions;
let timerInterval = null;
let answerTimeout = null;

/* ============================================================
   ===================== CANVAS SETUP =============================
   ============================================================ */

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const spinBtn = document.getElementById("spinBtn");
const resultBox = document.getElementById("resultBox");
const timerBox = document.getElementById("timer");

function drawWheel(options) {
    const count = options.length;
    const arc = (Math.PI * 2) / count;

    ctx.clearRect(0, 0, 400, 400);

    for (let i = 0; i < count; i++) {
        const start = i * arc;

        ctx.beginPath();
        ctx.moveTo(200, 200);
        ctx.arc(200, 200, 200, start, start + arc);
        ctx.closePath();
        ctx.fillStyle = sliceColors[i % sliceColors.length];
        ctx.fill();

        ctx.save();
        ctx.translate(200, 200);
        ctx.rotate(start + arc / 2);
        ctx.fillStyle = "#111";
        ctx.font = "bold 20px Tahoma";
        ctx.textAlign = "center";

        let text = options[i];
        if (text.length > 10) text = text.slice(0, 10) + "â€¦";

        ctx.fillText(text, 110, 8);
        ctx.restore();
    }
}

drawWheel(mainOptions);

/* ============================================================
   ===================== SPINNING LOGIC =============================
   ============================================================ */

function pickRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function clearAllTimers() {
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = null;

    if (answerTimeout) clearTimeout(answerTimeout);
    answerTimeout = null;

    timerBox.classList.add("hidden");
}

function spinWheel(callback) {
    clearAllTimers();
    spinBtn.disabled = true;
    canvas.classList.add("spinning");

    setTimeout(() => {
        canvas.classList.remove("spinning");
        spinBtn.disabled = false;
        callback();
    }, 3000);
}

/* ============================================================
   ===================== MAIN SPIN =============================
   ============================================================ */

spinBtn.onclick = spinMain;

function spinMain() {
    spinWheel(() => {
        let result = pickRandom(mainOptions);

        resultBox.classList.remove("hidden");
        resultBox.innerHTML = `<h3>ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©</h3><p>${result}</p>`;

        if (result === "Ø³Ø¤Ø§Ù„") setupQuestions();
        else setupChallenges();
    });
}

/* ============================================================
   ===================== QUESTIONS MODE =============================
   ============================================================ */

function setupQuestions() {
    drawWheel(questions.map(q => q.q));

    resultBox.innerHTML = `
        <h3>â“ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
        <p>Ù„ÙÙ‘ÙŠ Ø§Ù„Ø¹Ø¬Ù„Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„</p>
    `;

    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø£Ø³Ø¦Ù„Ø©)";
    spinBtn.onclick = spinQuestion;
}

function spinQuestion() {
    spinWheel(() => {
        const selected = pickRandom(questions);

        resultBox.innerHTML = `
            <h3>â“ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ§Ø±</h3>
            <p class="question-text">${selected.q}</p>
            <p>â³ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ.</p>
        `;
        startQuestionTimer(selected);
    });
}

function startQuestionTimer(qObj) {
    clearAllTimers();
    let sec = 30;
    timerBox.classList.remove("hidden");
    timerBox.textContent = `â³ ${sec} Ø«Ø§Ù†ÙŠØ©`;

    timerInterval = setInterval(() => {
        sec--;
        timerBox.textContent = `â³ ${sec} Ø«Ø§Ù†ÙŠØ©`;

        if (sec <= 0) {
            clearInterval(timerInterval);
            showAnswer(qObj);
        }
    }, 1000);
}

function showAnswer(qObj) {
    timerBox.classList.add("hidden");
    resultBox.innerHTML = `
        <h3>âœ”ï¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</h3>
        <p class="question-text">${qObj.q}</p>
        <p class="answer-text">${qObj.a}</p>
    `;
    resetMain();
}

/* ============================================================
   ===================== CHALLENGE MODE =============================
   ============================================================ */

function setupChallenges() {
    drawWheel(challenges);

    resultBox.innerHTML = `
        <h3>ğŸ­ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª</h3>
        <p>Ù„ÙÙ‘ÙŠ Ø§Ù„Ø¹Ø¬Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ø¯Ù‘ÙŠ</p>
    `;

    spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (ØªØ­Ø¯ÙŠØ§Øª)";
    spinBtn.onclick = spinChallenge;
}

function spinChallenge() {
    spinWheel(() => {
        const selected = pickRandom(challenges);

        resultBox.innerHTML = `
            <h3>ğŸ­ Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ</h3>
            <p class="question-text">${selected}</p>
            <p>â³ Ù„Ø¯ÙŠÙƒ 15 Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªÙ†ÙÙŠØ°!</p>
        `;
        startChallengeTimer();
    });
}

function startChallengeTimer() {
    clearAllTimers();
    let sec = 15;
    timerBox.classList.remove("hidden");
    timerBox.textContent = `â³ ${sec} Ø«Ø§Ù†ÙŠØ©`;

    timerInterval = setInterval(() => {
        sec--;
        timerBox.textContent = `â³ ${sec} Ø«Ø§Ù†ÙŠØ©`;

        if (sec <= 0) {
            clearInterval(timerInterval);
            timerBox.classList.add("hidden");

            resultBox.innerHTML += `
                <p style="color:#b91c1c; font-weight:bold;">â³ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!</p>
            `;
            resetMain();
        }
    }, 1000);
}

/* ================= RETURN TO MAIN ================= */
function resetMain() {
    setTimeout(() => {
        resultBox.innerHTML += `<p style="font-size:14px;color:#555;">ğŸ” Ø§Ø¶ØºØ·ÙŠ "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©" Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.</p>`;
        drawWheel(mainOptions);
        spinBtn.textContent = "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©";
        spinBtn.onclick = spinMain;
    }, 500);
}

</script>

</body>
</html>
